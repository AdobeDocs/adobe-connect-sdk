"use strict";(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[497],{11135:function(e,a,s){s.r(a),s.d(a,{_frontmatter:function(){return m},default:function(){return u}});var t,n=s(87462),o=s(63366),l=(s(15007),s(64983)),i=s(91515),d=["components"],m={},r=(t="CodeBlock",function(e){return console.warn("Component "+t+" was not imported, exported, or provided by MDXProvider as global scope"),(0,l.mdx)("div",e)}),c={_frontmatter:m},p=i.Z;function u(e){var a=e.components,s=(0,o.Z)(e,d);return(0,l.mdx)(p,(0,n.Z)({},c,s,{components:a,mdxType:"MDXLayout"}),(0,l.mdx)("h1",{id:"message-handling"},"Message Handling"),(0,l.mdx)("p",null,"Learn how Custom Pods can communicate with other components of a room using Messages. "),(0,l.mdx)("h2",{id:"sending-messages"},"Sending Messages"),(0,l.mdx)("p",null,"Each participant loads their own instance of the pod you build. The documentation reference outlines all of the Methods, Events, and Properties available in the Custom Pod SDK. The core functionality is sending messages to other instances of the pod and listening for those messages from other pods. In this way, a custom pod can communicate with other instances of itself."),(0,l.mdx)("p",null,"There are two functions that enable this. "),(0,l.mdx)("ul",null,(0,l.mdx)("li",{parentName:"ul"},(0,l.mdx)("strong",{parentName:"li"},"dispatchSyncMessage")),(0,l.mdx)("li",{parentName:"ul"},(0,l.mdx)("strong",{parentName:"li"},"syncMessageReceived"))),(0,l.mdx)("p",null,(0,l.mdx)("strong",{parentName:"p"},"dispatchSyncMessage")," sends messages to other pods. Those messages include:"),(0,l.mdx)("ul",null,(0,l.mdx)("li",{parentName:"ul"},"A message name to differentiate it from other messages"),(0,l.mdx)("li",{parentName:"ul"},"A message value - the contents of the message. A payload that can be a string, boolean, array, object or other data type."),(0,l.mdx)("li",{parentName:"ul"},"A boolean value, called ",(0,l.mdx)("inlineCode",{parentName:"li"},"isDelta"),", to indicate if it is a stateful message or not. (Defaults to ",(0,l.mdx)("inlineCode",{parentName:"li"},"False")," if not specified)"),(0,l.mdx)("li",{parentName:"ul"},"A boolean value, called ",(0,l.mdx)("inlineCode",{parentName:"li"},"echoBack"),", to indicate if the sender of the message should aslo receive the message. (Defaults to ",(0,l.mdx)("inlineCode",{parentName:"li"},"False")," if not specified).")),(0,l.mdx)("p",null,"So, a typical way to send a message might be:"),(0,l.mdx)(r,{slots:"heading, code",languages:"JavaScript",mdxType:"CodeBlock"}),(0,l.mdx)("h4",{id:"dispatching-sync-messages"},"Dispatching Sync Messages"),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-javascript"},'customPodObject.dispatchSyncMessage(\n  "update-note",\n  "this is my new note text",\n  false,\n  false\n);\n\n')),(0,l.mdx)("p",null,"By default, only hosts and presenters can send sync messages. To enable participants to send a specific sync messge, use the following syntax in your code for each of the message types they should be able to send:"),(0,l.mdx)(r,{slots:"heading, code",languages:"JavaScript",mdxType:"CodeBlock"}),(0,l.mdx)("h4",{id:"allowing-participants-to-dispatch-sync-messages"},"Allowing participants to dispatch Sync Messages"),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-javascript"},'customPodObject.allowParticipantPublish(\n    "update-note", \n    true\n);\n\n')),(0,l.mdx)("h2",{id:"stateful-vs-delta-messages"},"Stateful vs Delta Messages"),(0,l.mdx)("p",null,"To determine whether your message is a delta message or a stateful message, consider the following:"),(0,l.mdx)("ul",null,(0,l.mdx)("li",{parentName:"ul"},"A stateful message reflects the entire state for this message name. When the pod is loaded by someone who joined late, only the last message will be received."),(0,l.mdx)("li",{parentName:"ul"},"A delta message only reflects a part of the entire state. When the pod is loaded by someone who joined late, they will receive all of the delta messages for this message name.")),(0,l.mdx)("p",null,"So for a chat application, the Sync Messages to set an option or show who is typing a message would be ",(0,l.mdx)("strong",{parentName:"p"},"stateful"),", but each chat message would be a ",(0,l.mdx)("strong",{parentName:"p"},"delta")," message. In general, the large majority of your messages will be stateful and ",(0,l.mdx)("inlineCode",{parentName:"p"},"isDelta")," should be ",(0,l.mdx)("inlineCode",{parentName:"p"},"false"),"."),(0,l.mdx)("h2",{id:"receiving-messages"},"Receiving Messages"))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-message-handling-index-md-a8b39dfe304574334c91.js.map